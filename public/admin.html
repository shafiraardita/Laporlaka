<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Sistem Monitoring</title>
    <link rel="stylesheet" href="styles/admin.css">
    <link rel="stylesheet" href="styles/responsive.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <img src="https://img.icons8.com/ios-filled/50/000000/pdf.png" alt="Download PDF" style="width: 28px; height: 28px;" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://maps.googleapis.com/maps/api/js?key=AKTUAL_API_KEY_KAMU&libraries=geometry,drawing&callback=initMap" async defer></script>
</head>
<body>
    <header class="header">
  <button id="collapseSidebar" class="collapse-btn text-[#375B85] text-2xl p-2">
    ☰
  </button>  
  <div class="user-info">
    <button class="logout-btn" onclick="handleLogout()">Keluar</button>
    <span class="user-name">Pengguna: <span id="username">admin</span></span>
  </div>
</header>

   <div class="sidebar">
  <div id="sidebar-profile-btn" class="sidebar-header flex items-center justify-start gap-2 p-3 cursor-pointer">
  <img id="sidebar-profile-icon" src="assets/user.png" alt="Profile Icon" class="profile-icon w-8 h-8">
  <span class="sidebar-title font-semibold text-[#375B85]">admin</span>
</div>

  <nav class="sidebar-nav flex flex-col mt-2">
    <a href="#home" class="nav-item flex items-center justify-start gap-2 pl-3 pr-2 py-2" data-section="home-section">
      <i class="fas fa-home w-5 text-[#375B85]"></i>
      <span class="nav-text">Beranda</span>
    </a>
    <a href="#laporan-masuk" class="nav-item flex items-center justify-start gap-2 pl-3 pr-2 py-2" data-section="laporan-masuk-section">
      <i class="fas fa-inbox w-5 text-[#375B85]"></i>
      <span class="nav-text">Laporan Masuk</span>
    </a>
    <a href="#monitoring" class="nav-item flex items-center justify-start gap-2 pl-3 pr-2 py-2" data-section="monitoring-section">
      <i class="fas fa-chart-line w-5 text-[#375B85]"></i>
      <span class="nav-text">Monitoring Data</span>
    </a>
    <a href="#titik-laporan" class="nav-item flex items-center justify-start gap-2 pl-3 pr-2 py-2" data-section="titik-laporan-section">
      <i class="fas fa-map-marker-alt w-5 text-[#375B85]"></i>
      <span class="nav-text">Titik Laporan</span>
    </a>
    <a href="#tracking" class="nav-item flex items-center justify-start gap-2 pl-3 pr-2 py-2" data-section="tracking-section">
      <i class="fas fa-route w-5 text-[#375B85]"></i>
      <span class="nav-text">Pelacakan Laporan</span>
    </a>
    <a href="#manage-petugas" class="nav-item flex items-center justify-start gap-2 pl-3 pr-2 py-2" data-section="manage-petugas-section">
      <i class="fas fa-user-shield w-5 text-[#375B85]"></i>
      <span class="nav-text">Manajemen Petugas</span>
    </a>
    <a href="#manage-pengguna" class="nav-item flex items-center justify-start gap-2 pl-3 pr-2 py-2" data-section="manage-pengguna-section">
      <i class="fas fa-users w-5 text-[#375B85]"></i>
      <span class="nav-text">Manajemen Pengguna</span>
    </a>
  </nav>
</div>

    <main class="main-content">
        <section id="home-section" class="content-section">
            <h2>Selamat datang, Admin!</h2>
            <div class="section-content">
                <p>Anda telah masuk ke Sistem Monitoring & Evaluasi Kecelakaan Lalu Lintas Kota Bogor.</p>
                <p>Silahkan pantau data kecelakaan secara real-time dan kelola informasi dengan bijak untuk mendukung pengambilan keputusan yang tepat.</p>
                <p>Pilih menu sidebar untuk melihat detail</p>
                <div class="stats-section">
                    <h3>Proses Pelaporan</h3>
                    <div class="stats-cards">
                        <div class="stats-card proses1">
                            <h4>Total Laporan</h4>
                            <p id="total-laporan">0</p>
                        </div>
                        <div class="stats-card proses2">
                            <h4>Kasus Dalam Proses</h4>
                            <p id="kasus-proses">0</p>
                        </div>
                        <div class="stats-card proses3">
                            <h4>Kasus Diselesaikan</h4>
                            <p id="kasus-selesai">0</p>
                        </div>
                    </div>
                </div>
                <div class="notification-section">
                <h3>Laporan Terbaru</h3>
                <div class="notification-list" id="notification-list"></div>
                </div>
<div class="evaluasi-section">
<h3>Evaluasi</h3>
<p>Evaluasi data kecelakaan lalu lintas untuk meningkatkan keselamatan.</p>
<button class="add-evaluasi-btn" onclick="openAddEvaluasi()">+ Tambah Evaluasi</button>
<div class="evaluasi-cards" id="evaluasi-cards"></div>
</div>
</div>
</section>
  <!-- Modal for Evaluasi -->
<div class="modal" id="evaluasi-modal" style="display: none;">
<div class="modal-content">
                <span class="modal-close">×</span>
                <h2>Evaluasi</h2>
                <div class="modal-body">
                    <div class="profile-field">
                        <label>Judul:</label>
                        <input type="text" id="evaluasi-title" value="">
                    </div>
                    <div class="profile-field">
                        <label>Deskripsi:</label>
                        <textarea id="evaluasi-description"></textarea>
                    </div>
                    <div class="profile-field">
                        <label>Periode:</label>
                        <input type="text" id="evaluasi-period" value="">
                    </div>
                </div>
                <div class="profile-buttons">
                    <button class="delete-btn" id="delete-evaluasi-btn" style="background-color: #dc3545;">Hapus</button>
                    <button class="save-btn" id="save-evaluasi-btn">Simpan</button>
                    <button class="cancel-btn" id="cancel-evaluasi-btn">Batal</button>
                </div>
            </div>
        </div>

        <section id="profil-section" class="content-section">
            <h2>Profil Pengguna</h2>
            <div class="section-content profile-section">
                <div class="profile-field">
                    <label>Foto Profil:</label>
                    <img id="profile-preview" src="assets/user.png" alt="Profile Preview" style="max-width: 100px; margin-top: 10px;">
                </div>
                <div class="profile-field">
                    <label>Nama:</label>
                    <input type="text" id="profil-username" value="admin">
                </div>
                <div class="profile-field">
                    <label>Email:</label>
                    <input type="email" id="profil-email" value="">
                </div>
                <div class="profile-field">
                    <label>NIK:</label>
                    <input type="text" id="profil-nik" value="">
                </div>
                <div class="profile-field">
                    <label>Jabatan:</label>
                    <input type="text" id="profil-jabatan" value="">
                </div>
                <div class="profile-field">
                    <label>Nomor Telepon:</label>
                    <input type="tel" id="profil-telepon" value="">
                </div>
                <div class="profile-buttons">
                    <button class="save-btn" id="save-profile-btn">Simpan</button>
                </div>
            </div>
        </section>

        <section id="monitoring-section" class="content-section">
            <h2>Monitoring Data Kecelakaan Lalu Lintas di Kota Bogor</h2>
            <div class="section-content">
                <div class="monitoring-filters">
                    <label for="year-select">Tahun:</label>
                    <select id="year-select">
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                    </select>
                    <select id="month-select" onchange="updateChart()">
                    <option value="all">Semua Bulan</option>
                    <option value="01">Januari</option>
                    <option value="02">Februari</option>
                    <option value="03">Maret</option>
                    <option value="04">April</option>
                    <option value="05">Mei</option>
                    <option value="06">Juni</option>
                    <option value="07">Juli</option>
                    <option value="08">Agustus</option>
                    <option value="09">September</option>
                    <option value="10">Oktober</option>
                    <option value="11">November</option>
                    <option value="12">Desember</option>
                    </select>
                </div>
                <div class="chart-wrapper" id="chart-container">
                <canvas id="accident-chart"></canvas>
                <div class="monitoring-buttons">
                <button class="download-btn" id="download-chart-btn">Unduh Gambar</button>
                <button class="download-btn" id="download-excel-btn">Unduh Excel</button>
            </div>
            </div>

            </div>
        </section>

        <div class="content-section" id="titik-laporan-section">
    <h2>Titik Laporan Kecelakaan di Kota Bogor</h2>
    <p>Halaman ini menampilkan titik laporan kecelakaan berdasarkan tahun yang dipilih.</p>

    <div class="filter-section">
        <label for="filter-tahun-laporan">Pilih Tahun:</label>
        <select id="filter-tahun-laporan" onchange="toggleMapByYear()">
            <option value="2023">2023</option>
            <option value="2024">2024</option>
        </select>
    </div>

    <div id="map-2024-container">
        <h3>Titik Laporan Kecelakaan di Kota Bogor Pada Tahun 2024</h3>
        <button class="map-download-btn" onclick="downloadMapImage('map-2024', 'peta-wilayah-2024')">Unduh Gambar Peta 2024</button>
        <button class="map-download-btn" onclick="downloadMapDataToExcel('2024')">Unduh Excel Data 2024</button>
        <div id="map-2024" style="height: 400px; width: 100%;"></div>
    </div>

    <div id="map-2023-container">
        <h3>Titik Laporan Kecelakaan di Kota Bogor Pada Tahun 2023</h3>
        <button class="map-download-btn" onclick="downloadMapImage('map-2023', 'peta-wilayah-2023')">Unduh Gambar Peta 2023</button>
        <button class="map-download-btn" onclick="downloadMapDataToExcel('2023')">Unduh Excel Data 2023</button>
        <div id="map-2023" style="height: 400px; width: 100%;"></div>
    </div>
</div>

<section id="laporan-masuk-section" class="content-section">
    <h2>Laporan Masuk</h2>
    <div class="section-content">
    <p>Halaman ini menampilkan laporan kecelakaan yang telah masuk ke sistem.</p>
    <div class="filter-bar">
    <label for="report-search">Cari ID atau Nama Laporan:</label>
    <input type="text" id="report-search" oninput="searchReportById()" placeholder="Masukkan ID atau Nama">

    <label for="year-filter">Tahun:</label>
    <select id="year-filter" onchange="filterReports()">
        <option value="all">Semua</option>
        <option value="2025">2025</option>
        <option value="2024">2024</option>
        <option value="2023">2023</option>
    </select>

    <label for="month-filter">Bulan:</label>
    <select id="month-filter" onchange="filterReports()">
        <option value="all">Semua</option>
        <option value="Januari">Januari</option>
        <option value="Februari">Februari</option>
        <option value="Maret">Maret</option>
        <option value="April">April</option>
        <option value="Mei">Mei</option>
        <option value="Juni">Juni</option>
        <option value="Juli">Juli</option>
        <option value="Agustus">Agustus</option>
        <option value="September">September</option>
        <option value="Oktober">Oktober</option>
        <option value="November">November</option>
        <option value="Desember">Desember</option>
    </select>

    <button id="download-filter-btn"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
    <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
    </svg>Unduh Filter</button>
</div>
<table id="report-table" class="user-table">
<thead>
    <tr>
      <th>ID</th>
      <th>Nama</th>
      <th>Tanggal</th>
      <th>Jenis</th>
      <th>Titik kecelakaan</th>
      <th>Saksi</th>
      <th>Kronologi</th>
      <th>Status</th>
      <th>Detail</th>
      <th>Unduh</th>
    </tr>
  </thead>
  <tbody id="report-table-body"></tbody>
</table>
<div class="pagination-center">
    <button id="prev-page">Kembali</button>
    <button id="next-page">Lanjut</button>
</div>
</div>
</section>
        
<section id="manage-pengguna-section" class="content-section">
  <h2>Manajemen Pengguna</h2>
  <div style="margin-top: 10px; text-align: right;">
  <button onclick="openAddUserModal()" 
          style="background:#007bff; color:#fff; border:none; padding:8px 14px; border-radius:6px; cursor:pointer;">
    + Tambah Pengguna
  </button>
</div>

  <div class="section-content">
    <!-- Filter pencarian & urutkan -->
    <div style="display: flex; flex-wrap: wrap; gap: 10px; margin: 15px 0;">
      <input 
        type="text" 
        id="approved-user-search" 
        placeholder="Cari pengguna..." 
        style="flex: 1; padding: 6px;" 
        oninput="searchUsers('approved')" 
      />
      <select 
        id="approved-user-sort" 
        style="padding: 6px; min-width: 200px;" 
        onchange="sortUsers('approved')">
        <option value="az">Urutkan A-Z</option>
        <option value="za">Urutkan Z-A</option>
        <option value="terbaru">Aktif Terbaru</option>
        <option value="terlama">Aktif Terlama</option>
      </select>
    </div>

    <!-- Tabel daftar pengguna -->
    <div class="table-card">
      <h3>Daftar Pengguna</h3>
      <table class="user-table" style="width: 100%; border-collapse: collapse; text-align:center;">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nama</th>
            <th>Email</th>
            <th>No HP</th>
            <th>NIK</th>
            <th>Kategori</th>
            <th>Terakhir Aktif</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody id="approved-user-table-body">
          <!-- Data dari JS -->
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- Modal Tambah/Edit User -->
<div id="user-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000;">
  <div style="background:#fff; width:60%; max-width:500px; margin:60px auto; padding:20px; border-radius:10px; position:relative;">
    <h3 id="user-modal-title">Edit User</h3>

    <input type="hidden" id="user-id">

    <div style="margin-bottom:10px;">
      <label>Nama:</label>
      <input type="text" id="user-nama" style="width:100%; padding:6px;">
    </div>

    <div style="margin-bottom:10px;">
      <label>Email:</label>
      <input type="email" id="user-email" style="width:100%; padding:6px;">
    </div>

    <div style="margin-bottom:10px;">
      <label>No HP:</label>
      <input type="text" id="user-nohp" style="width:100%; padding:6px;">
    </div>

    <div style="margin-bottom:10px;">
      <label>NIK:</label>
      <input type="text" id="user-nik" style="width:100%; padding:6px;">
    </div>

    <div style="margin-bottom:10px;">
      <label>Kategori:</label>
      <select id="user-kategori" style="width:100%; padding:6px;">
        <option value="User">User</option>
        <option value="Petugas">Petugas</option>
        <option value="Admin">Admin</option>
        <option value="Pimpinan">Pimpinan</option>
      </select>
    </div>

    <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:20px;">
      <button id="save-user-btn" style="padding:8px 14px; background:#28a745; color:#fff; border:none; border-radius:6px; cursor:pointer;">
        Simpan
      </button>
      <button id="cancel-user-btn" style="padding:8px 14px; background:#ccc; border:none; border-radius:6px; cursor:pointer;">
        Batal
      </button>
    </div>

    <button id="user-modal-close" style="position:absolute; top:10px; right:10px; background:none; border:none; font-size:20px; cursor:pointer;">×</button>
  </div>
</div>

        <section id="tracking-section" class="content-section">
    <h2>Pelacakan Laporan Kecelakaan</h2>
    <div class="section-content">
        <div class="stats-section">
            <div class="stats-cards">
                <div class="stats-card blue1" id="card-total">
            <h4>Total Laporan</h4>
            <p id="total-reports">0</p>
            </div>
            <div class="stats-card blue2" id="card-accepted">
            <h4>Laporan Diterima</h4>
            <p id="accepted-reports-count">0</p>
            </div>
            <div class="stats-card blue3" id="card-handling">
            <h4>Penanganan Laporan</h4>
            <p id="handling-reports-count">0</p>
            </div>
            <div class="stats-card blue4" id="card-received">
            <h4>Laporan Selesai</h4>
            <p id="received-data-count">0</p>
            </div>
            <div class="stats-card blue5" id="card-rejected">
            <h4>Laporan Ditolak</h4>
            <p id="rejected-reports-count">0</p>
            </div>
            </div>
        </div>
        <div class="tracking-filter-bar">
  <input type="text" id="tracking-search" placeholder="Cari berdasarkan ID atau Nama" oninput="searchTracking()" />
 <select id="tracking-filter-year" onchange="applyFilters()">
  <option value="all">Semua Tahun</option>
  <option value="2025">2025</option>
  <option value="2024">2024</option>
  <option value="2023">2023</option>
</select>

<select id="tracking-filter-month" onchange="applyFilters()">
  <option value="all">Semua Bulan</option>
  <option value="Januari">Januari</option>
  <option value="Februari">Februari</option>
  <option value="Maret">Maret</option>
  <option value="April">April</option>
  <option value="Mei">Mei</option>
  <option value="Juni">Juni</option>
  <option value="Juli">Juli</option>
  <option value="Agustus">Agustus</option>
  <option value="September">September</option>
  <option value="Oktober">Oktober</option>
  <option value="November">November</option>
  <option value="Desember">Desember</option>
</select>
  <button class="download-btn" onclick="downloadFilteredTracking(currentTrackingCategory)">
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
    <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
    <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
  </svg>
  <span>Unduh Filter</span>
</button>
</div>
<div class="tracking-categories">
    <div class="category-card active" data-category="all" onclick="filterCategory('all')">Semua Laporan</div>
    <div class="category-card" data-category="accepted" onclick="filterCategory('accepted')">Laporan Diterima</div>
    <div class="category-card" data-category="handling" onclick="filterCategory('handling')">Penanganan Laporan</div>
    <div class="category-card" data-category="received" onclick="filterCategory('received')">Laporan Selesai</div>
    <div class="category-card" data-category="rejected" onclick="filterCategory('rejected')">Laporan Ditolak</div>
</div>
<div class="table-card">
<table id="tracking-table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Nama</th>
            <th>Tanggal</th>
            <th>Jenis Kecelakaan</th>
            <th>Kendaraan</th>
            <th>Jumlah Korban</th>
            <th>Titik Kejadian</th>
            <th>Kronologi</th>
            <th>Detail</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody id="tracking-table-body"></tbody>
</table>
</div>
    <div class="pagination">
            <div>
    <button id="prev-page">Kembali</button>
    <button id="next-page">Lanjut</button>
</div>
        </div>
        </div>
    </div>
</section>

        <div id="report-modal" class="modal" style="display:none;">
  <div class="modal-content">
  <span class="modal-close" onclick="closeReportModal()">×</span>
  <h2>Detail Laporan</h2>
  <!-- ================= DATA PELAPOR ================= -->
  <div class="modal-section">
    <h3>Data Pelapor</h3>
    <div class="modal-grid-2">
      <div class="form-group">
        <label>Nama:</label>
        <input type="text" id="report-nama" readonly>
      </div>
      <div class="form-group">
        <label>NIK:</label>
        <input type="text" id="report-nik" readonly>
      </div>
      <div class="form-group">
        <label for="report-telepon" 
         style="display: flex; align-items: center; gap: 6px; width: 300px; justify-content: flex-start; text-align: left;">
        <a id="whatsapp-link" href="#" target="_blank"
        style="color: #25D366; font-size: 18px; text-decoration: none;"
        title="Chat via WhatsApp">
        <i class="fa-brands fa-whatsapp"></i></a>
        Telepon (Klik untuk chat via WhatsApp) : </label>
        <input type="text" id="report-telepon" readonly>
      </div>
      <div class="form-group">
        <label>Saksi:</label>
        <input type="text" id="report-saksi" readonly>
      </div>
    </div>
  </div>

  <!-- ================= DATA KORBAN ================= -->
  <div class="modal-section">
    <h3>Data Korban</h3>
    <div class="modal-grid-2">
      <div class="form-group">
        <label>Jenis Kecelakaan:</label>
        <input type="text" id="report-jenis" readonly>
      </div>
      <div class="form-group">
        <label>Kendaraan:</label>
        <input type="text" id="report-kendaraan" readonly>
      </div>
      <div class="form-group">
        <label>Jumlah Korban:</label>
        <input type="text" id="report-jumlah-korban" readonly>
      </div>
      <div class="form-group">
        <label>Titik Kecelakaan:</label>
        <input type="text" id="report-titik" readonly>
      </div>
      <div class="form-group">
        <label>Tanggal:</label>
        <input type="text" id="report-tanggal" readonly>
      </div>
      <div class="form-group">
        <label>Status:</label>
        <input type="text" id="report-status" readonly>
      </div>
      <div class="form-group full-width">
        <label>Bukti:</label>
        <img id="report-bukti" src="" alt="Bukti Kecelakaan">
      </div>
      <div class="form-group full-width">
        <label>Kronologi:</label>
        <textarea id="report-kronologi" readonly></textarea>
      </div>
    </div>
  </div>

<!-- ================= DATA PETUGAS ================= -->
<div class="modal-section">
  <h3>Data Petugas</h3>
  <div class="modal-grid-2">
    
    <!-- Nama Petugas -->
    <div class="form-group full-width">
      <label>Nama Petugas:</label>
      <select id="report-petugas">
        <option value="">-- Pilih Petugas --</option>
      </select>
    </div>

    <!-- Input file untuk upload bukti -->
    <div class="form-group full-width">
      <label>Upload Bukti Selesai:</label>
      <input type="file" id="report-foto-petugas" accept="image/*">
    </div>

    <!-- Preview foto bukti dari API -->
    <div class="form-group full-width">
      <label>Foto Bukti Selesai (Dari Petugas):</label>
      <img
        id="report-bukti-petugas"
        src=""
        alt="Bukti Selesai Petugas"
        style="display:none; max-width:250px; margin-top:10px; border-radius:8px;"
      >
    </div>

    <!-- Keterangan selesai -->
    <div class="form-group full-width">
      <label>Keterangan Selesai:</label>
      <textarea
        id="report-keterangan"
        placeholder="Masukkan keterangan selesai..."
      ></textarea>
    </div>

  </div>

  <!-- 🟢 Hanya satu tombol simpan di sini -->
  <div class="report-buttons"></div>
</div>
    <div class="report-buttons"></div>
  </div>
</div>

        <!-- Modal for User Management -->
        <div class="modal" id="user-modal" style="display: none;">
            <div class="modal-content">
                <h2>Detail Pengguna</h2>
                <div class="modal-body">
                    <div class="profile-field">
                        <label>Nama:</label>
                        <input type="text" id="user-nama" value="">
                    </div>
                    <div class="profile-field">
                        <label>NIK:</label>
                        <input type="text" id="user-nik" value="">
                    </div>
                    <div class="profile-field">
                        <label>Email:</label>
                        <input type="email" id="user-email" value="">
                    </div>
                    <div class="profile-field">
                        <label>Telepon:</label>
                        <input type="tel" id="user-telepon" value="">
                    </div>
                    <div class="profile-field">
                        <label>Alamat:</label>
                        <input type="text" id="user-alamat" value="">
                    </div>
                    <div class="profile-field">
                        <label>Terakhir Aktif:</label>
                        <p id="user-last-active"></p>
                    </div>
                </div>
                <div class="profile-buttons">
                    <button class="save-btn" id="save-user-btn">Simpan</button>
                    <button id="cancel-user-btn" class="btn-cancel">Cancel</button>
                </div>
            </div>
        </div>

  <!-- ================= MANAGEMEN PETUGAS ================= -->
<section id="manage-petugas-section" class="content-section">
  <h2>Manajemen Petugas</h2>
  <div class="section-content">

    <!-- Tombol Tambah Petugas -->
    <div class="header-bar">
      <button class="btn btn-add" onclick="openAddPetugasModal()">
        + Tambah Petugas
      </button>
    </div>

    <!-- Filter Pencarian & Urutkan -->
    <div class="filter-bar">
      <input type="text" id="search-petugas" placeholder="Cari Petugas..." oninput="searchPetugas()"></div>

    <!-- Tabel Daftar Petugas -->
    <div class="table-container">
      <table id="petugasTable" class="user-table">
        <thead>
          <tr>
            <th>No</th>
            <th>Nama Petugas</th>
            <th>Unit / Instansi</th>
            <th style="text-align:center;">Aksi</th>
          </tr>
        </thead>
        <tbody id="petugas-table-body"></tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="pagination-center">
      <button onclick="prevPetugasPage()">Kembali</button>
      <span id="petugas-page-info">Halaman 1 dari 1</span>
      <button onclick="nextPetugasPage()">Lanjut</button>
    </div>

  </div>
</section>

<!-- ================= MODAL TAMBAH / EDIT PETUGAS ================= -->
<div id="petugasModal" class="modal-petugas">
  <div class="modal-content-petugas">
    <span class="close" onclick="closePetugasModal()">&times;</span>
    <h3 id="modal-petugas-title">Tambah Petugas</h3>

    <form id="petugas-form" onsubmit="savePetugasLocal(event)">
      <div class="modal-form-grid">
        <div class="form-group">
          <label for="petugas-nama">Nama Petugas</label>
          <input type="text" id="petugas-nama" placeholder="Masukkan nama" required>
        </div>
        <div class="form-group">
          <label for="petugas-unit">Unit / Instansi</label>
          <input type="text" id="petugas-unit" placeholder="Masukkan unit / instansi" required>
        </div>
      </div>

      <div class="modal-btn">
        <button type="submit" class="btn-save">Simpan</button>
        <button type="button" class="btn-cancel" onclick="closePetugasModal()">Batal</button>
      </div>
    </form>
  </div>
</div>

        <div id="error-boundary" class="error-boundary"></div>
    </main>
    <!-- Include the external JavaScript file -->
    <script src="scripts/admin.js"></script>
    <div id="zoomModal">
  <span class="close">&times;</span>
  <img id="zoomedImage" src="" alt="Zoomed Bukti">
</div>
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
  const collapseBtn = document.getElementById("collapseSidebar");
  const sidebar = document.querySelector(".sidebar");

  if (collapseBtn && sidebar) {
    collapseBtn.addEventListener("click", () => {
      sidebar.classList.toggle("expanded");
    });
  }
});
</script>
</body>
</html>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    initializeAdminPage();
  });
</script>
<script>
  console.log("Anda sudah masuk ke halaman admin");
  document.addEventListener("DOMContentLoaded", function () {
  const collapseBtn = document.getElementById("collapseSidebar");
  const sidebar = document.querySelector(".sidebar");
  const overlay = document.createElement("div");
  overlay.className = "sidebar-overlay";
  document.body.appendChild(overlay);

  // Toggle collapse (desktop)
  collapseBtn.addEventListener("click", () => {
    if (window.innerWidth > 768) {
      sidebar.classList.toggle("collapsed");
    } else {
      sidebar.classList.toggle("active");
      overlay.classList.toggle("active");
    }
  });

  overlay.addEventListener("click", () => {
  sidebar.classList.remove("active");
  overlay.classList.remove("active");
    
  });
});
</script>

